<div [ngClass]="{ 'loading': loading }" class="schools-wrapper">
  <h2>Schools</h2>

  <div class="alert alert-error" *ngIf="error">
    {{ error }}
  </div>
  <div class="alert alert-success" *ngIf="success">
    {{ success }}
  </div>

  <section class="form-section">
    <h3>Create New School</h3>
    <form [formGroup]="schoolForm" (ngSubmit)="onSubmit()">
      <div class="form-row">
        <label>Name *</label>
        <input type="text" formControlName="name" placeholder="Full school name" />
        <small *ngIf="schoolForm.get('name')?.invalid && schoolForm.get('name')?.touched">
          School name is required.
        </small>
      </div>

      <div class="form-row">
        <label>Code *</label>
        <input type="text" formControlName="code" placeholder="Short code e.g. demo" />
        <small class="hint">Letters, numbers, hyphen or underscore only.</small>
        <small *ngIf="schoolForm.get('code')?.invalid && schoolForm.get('code')?.touched">
          Valid school code is required.
        </small>
      </div>

      <div class="form-row">
        <label>Logo URL</label>
        <input type="text" formControlName="logoUrl" placeholder="https://example.com/logo.png" />
      </div>

      <div class="form-row">
        <label>Address</label>
        <input type="text" formControlName="address" placeholder="Postal address" />
      </div>

      <div class="form-row">
        <label>Phone</label>
        <input type="text" formControlName="phone" placeholder="+123456789" />
      </div>

      <div class="form-row">
        <label>Subscription End Date</label>
        <input type="date" formControlName="subscriptionEndDate" />
      </div>

      <button type="submit" class="btn btn-primary" [disabled]="submitting">
        {{ submitting ? 'Creating...' : 'Create School' }}
      </button>
    </form>
  </section>

  <section class="list-section">
    <h3>Existing Schools</h3>
    <div *ngIf="schools.length === 0 && !loading" class="empty-state">
      No schools found yet.
    </div>
    <div class="school-card" *ngFor="let school of schools">
      <div class="school-header">
        <div>
          <h4>{{ school.name }}</h4>
          <p class="code">Code: {{ school.schoolid }}</p>
        </div>
        <div class="school-header-right">
          <span class="badge" [ngClass]="{ active: school.isActive, inactive: !school.isActive }">
            {{ school.isActive ? 'Active' : 'Inactive' }}
          </span>
          <button 
            type="button" 
            class="btn btn-danger btn-sm" 
            (click)="deleteSchool(school.id)"
            [disabled]="isDeleting(school.id)"
            title="Delete school">
            {{ isDeleting(school.id) ? 'Deleting...' : 'üóëÔ∏è Delete' }}
          </button>
        </div>
      </div>
      <div class="school-body">
        <p *ngIf="school.address"><strong>Address:</strong> {{ school.address }}</p>
        <p *ngIf="school.phone"><strong>Phone:</strong> {{ school.phone }}</p>
        <p *ngIf="school.subscriptionEndDate">
          <strong>Subscription ends:</strong>
          {{ school.subscriptionEndDate | date }}
        </p>
      </div>
    </div>
  </section>
</div>

